%script{src: "https://api.trello.com/1/client.js?key=#{ENV['PUBLIC_KEY']}"}
%script{src: "/js/trello.js"}

.container
  .row{style: "margin-top: 40px;"}
    .row
      %h2
        .col-md-4
          Edit Settings
        .col-md-8
          %form{action: "/logout", method: "post"}
            %input{type: "submit", class: "btn btn-default pull-right", value: "Log Out"}
    %hr

    %form{action: "/settings/email", method: "post", role: "form"}
      .form-group
        .row
          .col-md-3
            %label{for: "email"} Email
        .row
          .col-md-3
            %input{type: "email", id: "email", name: "email", class: "form-control", value: "#{@user.email}", required: "required"}
          .col-md-2
            %input{class: "btn btn-primary", type: "submit", value:"Update Email"}

    %hr

    %form{action: "/settings/password", method: "post", role: "form"}
      .form-group
        .row
          .col-md-3
            %label{for: "current-password"} Current Password
          .col-md-3
            %label{for: "password"} New Password
          .col-md-3
            %label{for: "confirm-password"} Confirm New Password
        .row
          .col-md-3
            %input{type: "password", id: "current-password", name: "current-password", class: "form-control", autocomplete: "off", required: "required"}
          .col-md-3
            %input{type: "password", id: "password", name: "password", class: "form-control", required: "required"}
          .col-md-3
            %input{type: "password", id: "confirm-password", name: "confirm-password", class: "form-control", required: "required"}
          .col-md-3
            %input{class: "btn btn-primary", type: "submit", value:"Change Password"}

  %hr

  - unless @user.member_token.nil?
    %form{action: "/settings/trello/disconnect", method: "put"}
      %input{type: "submit", class: "btn btn-default btn-warning", value: "Disconnect #{@user.trello_name} from Trello"}
  - else
    %a{class: "btn btn-primary btn-lg", href: "javascript:void(0)", onClick: "AuthenticateTrelloFromSettings()"}
      Connect with Trello

  %hr
    %form{action: "/delete", method: "delete"}
      .checkbox{style: "font-size: 16px;"}
        %label
          %input{type: "checkbox", name: "iamsure"}
            This box verifies that you would like to delete your account when clicking the link below.
      %input{type: "submit", class: "btn btn-default", value: "Delete Account"}
